{ config, lib, pkgs, ... }:
{

  imports = [
    <nixos-hardware/common/pc/ssd>
    <nixos-hardware/common/cpu/intel>
    <nixos-hardware/common/gpu/nvidia/ampere>
  ];
  # Other config
  services.xserver.xkb.layout = lib.mkDefault "gb";  # Keyboard layout
  # boot.loader.efi.efiSysMountPoint = "/efi";
  hardware.pulseaudio.enable = false;

  # NVIDIA RTX 3060 configuration
  hardware.nvidia = {
    open = true;
    modesetting.enable = true;  # Enable modesetting for NVIDIA
    nvidiaSettings = true;
    package = config.boot.kernelPackages.nvidiaPackages.stable;  # Use the stable NVIDIA driver
  };
  hardware.nvidia-container-toolkit.enable = true;
  services.xserver.videoDrivers = [ "nvidia" ];  # Use NVIDIA driver for X serverdkk

  # Optional: Enable hardware acceleration for Vulkan and OpenGL
  hardware.graphics.enable = true;

  services.autorandr = lib.mkDefault {
    enable = lib.mkDefault true;
    profiles = {
      "mono-small" = {
        fingerprint = {
          "DP-3" = "00ffffffffffff006a6300160000000001210103802315782aee91a3544c99260f5054210800d1c0d10081009500a9000101010101019c6800a0a04029603020350058d71000001a000000fc00446973706c61790a2020202020000000ff000a202020202020202020202020000000fd0030780fde46000a202020202020018c020340f246900102030410e200d5e305c00023097f0783010000e50f00000c0067030c001000187867d85dc401788801e6060501626200681a000001013078e672d000a0a04029603020350058d71000001a565e00a0a0a029503020350058d71000001a70c200a0a0a055503020350058d71000001a0000000000000000005b";
        };
        config = {
          "DP-3" = {
            enable = true;
            crtc = 0;
            mode = "2560x1600";
            position = "0x0";
            primary = true;
            rate = "60.01";
          };
        };
      };
      "mono-large" = {
        fingerprint = {
          "DP-0" = "00ffffffffffff0006b354270101010128210104b53c22783baea0ac5240b1240e5054254a0081c081408180a940d1c00101010101014dd000a0f0703e803020350055502100001a000000fd0c30a07d7da0010a202020202020000000fc00584732375543530a2020202020000000ff0053334c4d54463230363434390a02a102033ef155767561605f5e5d403f2221201f131211100403020123090707830100006d1a0000020130a0000000000000e305c000e6060501696924e200ea6fc200a0a0a055503020350055502100001a0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000d1701279030003016494240204ff0e5f002f801f006f08450002000400fbf20104ff0e9f002f801f006f083b0030000400ceac0104ff0e9f006f801f006f087e007600040058fa0004ff095f002f801f009f05450013000700555e0004ff099f002f801f009f05280002000400000000000000000000000000000000000000ca90";
        };
        config = {
          "DP-0" = {
            enable = true;
            crtc = 0;
            mode = "3840x2160";
            position = "0x0";
            primary = true;
            rate = "60.01";
          };
        };
      };
      "dual" = {
        fingerprint = {
          "DP-0" = "00ffffffffffff0006b354270101010128210104b53c22783baea0ac5240b1240e5054254a0081c081408180a940d1c00101010101014dd000a0f0703e803020350055502100001a000000fd0c30a07d7da0010a202020202020000000fc00584732375543530a2020202020000000ff0053334c4d54463230363434390a02a102033ef155767561605f5e5d403f2221201f131211100403020123090707830100006d1a0000020130a0000000000000e305c000e6060501696924e200ea6fc200a0a0a055503020350055502100001a0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000d1701279030003016494240204ff0e5f002f801f006f08450002000400fbf20104ff0e9f002f801f006f083b0030000400ceac0104ff0e9f006f801f006f087e007600040058fa0004ff095f002f801f009f05450013000700555e0004ff099f002f801f009f05280002000400000000000000000000000000000000000000ca90";
          "DP-3" = "00ffffffffffff006a6300160000000001210103802315782aee91a3544c99260f5054210800d1c0d10081009500a9000101010101019c6800a0a04029603020350058d71000001a000000fc00446973706c61790a2020202020000000ff000a202020202020202020202020000000fd0030780fde46000a202020202020018c020340f246900102030410e200d5e305c00023097f0783010000e50f00000c0067030c001000187867d85dc401788801e6060501626200681a000001013078e672d000a0a04029603020350058d71000001a565e00a0a0a029503020350058d71000001a70c200a0a0a055503020350058d71000001a0000000000000000005b";
        };
        config = {
          "DP-0" = {
            enable = true;
            crtc = 0;
            mode = "3840x2160";
            position = "0x0";
            rate = "60.01";
          };
          "DP-3" = {
            enable = true;
            crtc = 0;
            mode = "2560x1600";
            position = "3840x480";
            primary = true;
            rate = "60.01";
          };
        };
      };
    };
  };



}
